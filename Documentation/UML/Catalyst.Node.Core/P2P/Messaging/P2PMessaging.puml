@startuml
class P2PMessaging {
    {static} P2PMessaging()
    + P2PMessaging(settings:IPeerSettings, certificateStore:ICertificateStore, logger:ILogger)
    - <<async>> RunP2PServerAsync() : Task
    - <<async>> RunP2PClientAsync() : Task
    + Stop() : void
    + <<async>> PingAsync(targetNode:IPeerIdentifier) : Task<bool>
    + <<async>> BroadcastMessageAsync(message:string) : Task
    # <<virtual>> Dispose(disposing:bool) : void
    + Dispose() : void
}
IP2PMessaging <|-- P2PMessaging
IDisposable <|-- P2PMessaging
P2PMessaging --> "_settings" IPeerSettings
P2PMessaging --> "_logger" ILogger
P2PMessaging --> "_cancellationSource" CancellationTokenSource
P2PMessaging --> "_certificate" X509Certificate2
P2PMessaging --> "_clientChannel" IChannel
P2PMessaging --> "_clientEventLoopGroup" MultithreadEventLoopGroup
P2PMessaging --> "_serverChannel" IChannel
P2PMessaging --> "_serverParentGroup" MultithreadEventLoopGroup
P2PMessaging --> "_serverWorkerGroup" MultithreadEventLoopGroup
P2PMessaging --> "Identifier" IPeerIdentifier
@enduml
